{"ast":null,"code":"import _objectSpread from\"/home/user/internship/react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/home/user/internship/react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/user/internship/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{useEffect}from\"react\";import Task from\"./Task\";import TodoForm from\"./TodoForm.js\";import Filters from\"./Filters\";import PagesButton from\"./PagesButton\";import moment from\"moment\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var NUM_TASK=4;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),tasks=_useState2[0],setTasks=_useState2[1];var _useState3=useState(\"filter__all\"),_useState4=_slicedToArray(_useState3,2),filters=_useState4[0],setFilter=_useState4[1];var _useState5=useState(tasks),_useState6=_slicedToArray(_useState5,2),filtredArray=_useState6[0],setFiltredArray=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),page=_useState8[0],setPages=_useState8[1];var _useState9=useState(1),_useState10=_slicedToArray(_useState9,2),pagesCount=_useState10[0],setPagesCount=_useState10[1];var _useState11=useState(\"sort__last\"),_useState12=_slicedToArray(_useState11,2),sort=_useState12[0],setSort=_useState12[1];var handleFilter=function handleFilter(filter){setFilter(filter);};var handleSort=function handleSort(sort){setSort(sort);};useEffect(function(){switch(filters){case\"filter__all\":setFiltredArray(_toConsumableArray(tasks).sort(function(prev,next){return sort===\"sort__last\"?prev.id-next.id:next.id-prev.id;}));break;case\"filter__done\":setFiltredArray(_toConsumableArray(tasks).filter(function(task){return task.check===true;}).sort(function(prev,next){return sort===\"sort__last\"?prev.id-next.id:next.id-prev.id;}));break;default:setFiltredArray(_toConsumableArray(tasks).filter(function(task){return task.check!==true;}).sort(function(prev,next){return sort===\"sort__last\"?prev.id-next.id:next.id-prev.id;}));break;}},[filters,sort,tasks]);useEffect(function(){setPagesCount(Math.ceil(filtredArray.length/4)||1);},[filtredArray,filters,sort]);useEffect(function(){if(page>pagesCount){setPages(pagesCount);}},[pagesCount]);var handlePage=function handlePage(event){switch(event.target.className){case\"pagination__forward\":if(page===pagesCount){break;}setPages(page+1);break;case\"pagination__back\":if(page===1){break;}setPages(page-1);break;default:break;}};var movingOnPages=function movingOnPages(number){setPages(number);};var addTask=function addTask(userInput){if(!validate(userInput))return;if(userInput){var newTask={title:userInput,id:Date.now(),check:false,date:moment().format(\"LLLL\")};setTasks([].concat(_toConsumableArray(tasks),[newTask]));}};var validate=function validate(val){if(val===''){alert('Введите что-нибудь');return false;};var arrayWord=val.split(' ');var result=true;arrayWord.forEach(function(item){if(item.length>32){alert('многого хотите, нет такого слова');result=false;}});return result;};var removeTask=function removeTask(id){setTasks(tasks.filter(function(task){return task.id!==id;}));};var checkTask=function checkTask(id){setTasks(tasks.map(function(task){return _objectSpread(_objectSpread({},task),{},{check:task.id===id?!task.check:task.check});}));};return/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"ToDo\"}),/*#__PURE__*/_jsx(TodoForm,{addTask:addTask}),/*#__PURE__*/_jsx(Filters,{onFilter:handleFilter,onSort:handleSort,filters:filters,sort:sort}),/*#__PURE__*/_jsx(\"div\",{className:\"tasksBox\",children:filtredArray.slice((page-1)*NUM_TASK,NUM_TASK*page).map(function(task){return/*#__PURE__*/_jsx(Task,{task:task,removeTask:removeTask,checkTask:checkTask,tasks:tasks,page:page,validate:validate},task.id);})}),pagesCount>1?/*#__PURE__*/_jsx(PagesButton,{handlePage:handlePage,pagesCount:pagesCount,page:page,movingOnPages:movingOnPages}):'']});}export default App;","map":{"version":3,"names":["useState","useEffect","Task","TodoForm","Filters","PagesButton","moment","App","NUM_TASK","tasks","setTasks","filters","setFilter","filtredArray","setFiltredArray","page","setPages","pagesCount","setPagesCount","sort","setSort","handleFilter","filter","handleSort","prev","next","id","task","check","Math","ceil","length","handlePage","event","target","className","movingOnPages","number","addTask","userInput","validate","newTask","title","Date","now","date","format","val","alert","arrayWord","split","result","forEach","item","removeTask","checkTask","map","slice"],"sources":["/home/user/internship/react/src/App.js"],"sourcesContent":["import { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport Task from \"./Task\";\nimport TodoForm from \"./TodoForm.js\";\nimport Filters from \"./Filters\";\nimport PagesButton from \"./PagesButton\";\nimport moment from \"moment\";\n\nfunction App() {\n  const NUM_TASK = 4;\n  const [tasks, setTasks] = useState([]);\n  const [filters, setFilter] = useState(\"filter__all\");\n  const [filtredArray, setFiltredArray] = useState(tasks);\n  const [page, setPages] = useState(1);\n  const [pagesCount, setPagesCount] = useState(1);\n  const [sort, setSort] = useState(\"sort__last\");\n\n  const handleFilter = (filter) => {\n    setFilter(filter);\n  };\n\n  const handleSort = (sort) => {\n    setSort(sort);\n  };\n\n  useEffect(() => {\n    switch (filters) {\n      case \"filter__all\":\n        setFiltredArray(\n          [...tasks].sort((prev, next) =>\n            sort === \"sort__last\" ? prev.id - next.id : next.id - prev.id\n          )\n        );\n        break;\n\n      case \"filter__done\":\n        setFiltredArray(\n          [...tasks]\n            .filter((task) => task.check === true)\n            .sort((prev, next) =>\n              sort === \"sort__last\" ? prev.id - next.id : next.id - prev.id\n            )\n        );\n        break;\n\n      default:\n        setFiltredArray(\n          [...tasks]\n            .filter((task) => task.check !== true)\n            .sort((prev, next) =>\n              sort === \"sort__last\" ? prev.id - next.id : next.id - prev.id\n            )\n        );\n        break;\n    }\n  }, [filters, sort, tasks]);\n\n  useEffect(() => {\n    setPagesCount(Math.ceil(filtredArray.length / 4) || 1);\n  }, [filtredArray, filters, sort]);\n\n  useEffect(() => {\n    if (page > pagesCount) {\n      setPages(pagesCount);\n    }\n  }, [pagesCount]);\n\n  const handlePage = (event) => {\n    switch (event.target.className) {\n      case \"pagination__forward\":\n        if (page === pagesCount) {\n          break;\n        }\n        setPages(page + 1);\n        break;\n      case \"pagination__back\":\n        if (page === 1) {\n          break;\n        }\n        setPages(page - 1);\n        break;\n      default:\n        break;\n    }\n  };\n\n  const movingOnPages = (number) => {\n    setPages(number);\n  };\n\n  const addTask = (userInput) => {\n    if (!validate(userInput))return\n    if (userInput) {\n      const newTask = {\n        title: userInput,\n        id: Date.now(),\n        check: false,\n        date: moment().format(\"LLLL\"),\n      };\n      setTasks([...tasks, newTask]);\n    }\n  };\n\n  const validate = (val) => {\n    if (val === '') {\n        alert('Введите что-нибудь');\n        return false};\n    let arrayWord = val.split(' ');\n    let result = true;\n\n    arrayWord.forEach(item => {\n        if (item.length > 32) {\n            alert('многого хотите, нет такого слова');\n            result = false;}\n    });\n\n    return result;\n}\n\n  const removeTask = (id) => {\n    setTasks(tasks.filter((task) => task.id !== id));\n  };\n\n  const checkTask = (id) => {\n    setTasks(\n      tasks.map((task) => ({\n        ...task,\n        check: task.id === id ? !task.check : task.check,\n      }))\n    );\n  };\n\n  return (\n    <main>\n      <h1>ToDo</h1>\n      <TodoForm addTask={addTask} />\n      <Filters\n        onFilter={handleFilter}\n        onSort={handleSort}\n        filters={filters}\n        sort={sort}\n      />\n      <div className=\"tasksBox\">\n        {filtredArray\n          .slice((page - 1) * NUM_TASK, NUM_TASK * page)\n          .map((task) => {\n            return (\n              <Task\n                task={task}\n                key={task.id}\n                removeTask={removeTask}\n                checkTask={checkTask}\n                tasks={tasks}\n                page={page}\n                validate={validate}\n              />\n            );\n          })}\n      </div>\n      {(pagesCount>1)? (\n         (\n          <PagesButton\n            handlePage={handlePage}\n            pagesCount={pagesCount}\n            page={page}\n            movingOnPages={movingOnPages}\n          />\n        )\n      ):('')}\n    </main>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}